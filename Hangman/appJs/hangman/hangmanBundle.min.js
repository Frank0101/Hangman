(function(){var n=window.hangman=window.hangman||{};n.CharacterModel=function(n){var t=this;t.character=n.toLowerCase();t.discovered=!1}})(),function(){var n=window.hangman=window.hangman||{};n.KeyboardModel=function(){function i(){for(var i=0;i<26;i++)t.keys.push(new n.KeyModel(String.fromCharCode(i+97)))}var t=this;t.keys=[];t.pressKey=function(n){for(var i=0;i<t.keys.length;i++)t.keys[i].key==n.toLowerCase()&&(t.keys[i].pressed=!0)};i()}}(),function(){var n=window.hangman=window.hangman||{};n.KeyModel=function(n){var t=this;t.key=n.toLowerCase();t.pressed=!1}}(),function(){var n=window.hangman=window.hangman||{};n.PhraseModel=function(t){function r(){for(var t=0,u,r;(u=i.phrase.indexOf(" ",t+1))!=-1;)r=i.phrase.substring(t,u),i.words.push(new n.WordModel(r)),t=u;r=i.phrase.substring(t,i.phrase.length);i.words.push(new n.WordModel(r))}var i=this;i.phrase=t.replace(/[^a-zA-Z ]/g,"").trim();i.words=[];i.discoveredCount=function(){for(var t=0,n=0;n<i.words.length;n++)t+=i.words[n].discoveredCount();return t};i.undiscoveredCount=function(){for(var t=0,n=0;n<i.words.length;n++)t+=i.words[n].undiscoveredCount();return t};i.discoverCharacter=function(n){for(var r=!1,t=0;t<i.words.length;t++)i.words[t].discoverCharacter(n)&&(r=!0);return r};i.phraseDiscovered=function(){return i.undiscoveredCount()==0};i.revealPhrase=function(){for(var n=0;n<i.words.length;n++)i.words[n].revealWord()};r()}}(),function(){var n=window.hangman=window.hangman||{};n.WordModel=function(t){function r(){for(var t=0;t<i.word.length;t++)i.characters.push(new n.CharacterModel(i.word[t]))}var i=this;i.word=t.replace(/[^a-zA-Z]/g,"");i.characters=[];i.discoveredCount=function(){for(var t=0,n=0;n<i.characters.length;n++)i.characters[n].discovered&&t++;return t};i.undiscoveredCount=function(){return i.characters.length-i.discoveredCount()};i.discoverCharacter=function(n){for(var r=!1,t=0;t<i.characters.length;t++)i.characters[t].character==n.toLowerCase()&&(i.characters[t].discovered=!0,r=!0);return r};i.wordDiscovered=function(){return i.undiscoveredCount()==0};i.revealWord=function(){for(var n=0;n<i.word.length;n++)i.characters[n].discovered=!0};r()}}();angular.module("hangmanApp",["hangmanApp.controllers","hangmanApp.services","hangmanApp.constants"]);angular.module("hangmanApp.controllers",[]);angular.module("hangmanApp.services",[]);angular.module("hangmanApp.constants",[]);angular.module("hangmanApp.controllers").controller("hangmanController",["$scope","hangmanService","wordService","hangmanConstants",function(n,t,i,r){n.errors=0;n.keyboard=null;n.phrase=null;n.init=function(){n.errors=0;n.keyboard=t.getKeyboard();i.getWord().then(function(i){n.phrase=t.getPhrase(i)})};n.onKeyPress=function(t){n.keyboard.pressKey(t);n.phrase.discoverCharacter(t)||(n.errors++,n.playerLose()&&n.phrase.revealPhrase())};n.playerWins=function(){return n.phrase?n.errors<r.MAX_ERRORS&&n.phrase.phraseDiscovered():!1};n.playerLose=function(){return n.errors==r.MAX_ERRORS};n.endGame=function(){return n.playerWins()||n.playerLose()};n.init()}]);angular.module("hangmanApp.services").service("hangmanService",["hangmanConstants",function(n){var t=this;t.getKeyboard=function(){return new n.NS.KeyboardModel};t.getPhrase=function(t){return new n.NS.PhraseModel(t)}}]);angular.module("hangmanApp.services").service("wordService",["$http","$q",function(n,t){var r=this,i=null;r.getWord=function(){var r=t.defer();return i?r.resolve(i[Math.floor(Math.random()*i.length)]):n.get("/feeds/words_it.json").success(function(n){i=n;r.resolve(i[Math.floor(Math.random()*i.length)])}),r.promise}}]);angular.module("hangmanApp.constants").constant("hangmanConstants",{NS:window.hangman,MAX_ERRORS:6});
//# sourceMappingURL=hangmanBundle.min.js.map
